# Implementation Plan: Monorepo Setup

**Branch**: `001-monorepo-setup` | **Date**: 2026-02-04 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/001-monorepo-setup/spec.md`

## Summary

Initialize npm workspaces monorepo structure with three packages (server, client, shared) enabling unified development workflow. TypeScript throughout with shared types accessible from both server and client packages.

## Technical Context

**Language/Version**: TypeScript 5.x, Node.js 20.x LTS
**Primary Dependencies**: npm workspaces (built-in), TypeScript, tsx (dev runner)
**Storage**: N/A (no database in this feature)
**Testing**: Vitest (unified test runner for all packages)
**Target Platform**: Node.js server + Browser client
**Project Type**: Monorepo (npm workspaces)
**Performance Goals**: Dev server startup < 30s, instant shared type updates
**Constraints**: Single `npm install`, root-level scripts work for all packages
**Scale/Scope**: 3 packages (server, client, shared)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

**Status**: No project constitution defined yet. Proceeding with standard best practices.

Implicit gates (based on project CLAUDE.md):
- [x] Code and commits in English
- [x] TypeScript for type safety
- [x] npm as package manager
- [x] Fastify for server (to be configured)
- [x] React + Vite for client (to be configured)

## Project Structure

### Documentation (this feature)

```text
specs/001-monorepo-setup/
├── plan.md              # This file
├── research.md          # Phase 0 output
├── data-model.md        # N/A (no data model)
├── quickstart.md        # Phase 1 output
├── contracts/           # N/A (no API contracts)
└── tasks.md             # Phase 2 output (/speckit.tasks)
```

### Source Code (repository root)

```text
packages/
├── server/
│   ├── src/
│   │   └── index.ts         # Entry point (placeholder)
│   ├── package.json
│   └── tsconfig.json
│
├── client/
│   ├── src/
│   │   └── main.tsx         # Entry point (placeholder)
│   ├── index.html
│   ├── package.json
│   ├── tsconfig.json
│   └── vite.config.ts
│
└── shared/
    ├── src/
    │   └── index.ts         # Shared types export
    ├── package.json
    └── tsconfig.json

# Root level
├── package.json             # Workspaces config + root scripts
├── tsconfig.base.json       # Shared TypeScript config
├── .nvmrc                   # Node.js version specification
└── .gitignore               # Updated for monorepo
```

**Structure Decision**: npm workspaces monorepo with `packages/` directory containing server, client, and shared packages. Root tsconfig.base.json provides shared compiler options extended by each package.

## Complexity Tracking

No constitution violations to justify.

## Implementation Phases

### Phase 0: Research

See [research.md](research.md) for:
- npm workspaces configuration best practices
- TypeScript project references vs path aliases
- Vitest monorepo configuration

### Phase 1: Design

- **data-model.md**: N/A (no data entities in this feature)
- **contracts/**: N/A (no API contracts in this feature)
- **quickstart.md**: Developer setup guide

### Phase 2: Tasks

Generated by `/speckit.tasks` command after plan approval.
